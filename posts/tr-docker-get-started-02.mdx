---
title: Docker - Контейнеризация приложения
description: Docker - Get Started 02 (перевод)
date: '2023-01-11'
---

## Содержание
<DockerGetStartedContentList />

В остальной части этого руководства вы будете работать с простым менеджером списков задач, который написан на Node.js. Если вы не знакомы с Node.js, не волнуйтесь. Это руководство не требует опыта работы с JavaScript.

Для работы с руководством, вам понадобятся:
- Docker работает локально. Следуйте инструкции [по скачиванию и установке Docker](https://docs.docker.com/get-docker/)
- [Git клиент](https://git-scm.com/downloads)
- IDE или текстовый редактор. Docker рекомендует использовать [Visual Strudio Code](https://code.visualstudio.com/)
- Концептуальное понимание [контейнеров и образов](https://docs.docker.com/get-started/overview/#docker-objects)

## Скачайте приложение
Перед тем как вы запустите приложение, вам нужно скачать исходный код приложения на ваш компьютер
1. Клонируйте [getting-started repository](https://github.com/docker/getting-started/tree/master) используя следующую команду:
```bash
$ git clone https://github.com/docker/getting-started.git
```
2. Просмотрите содержимое клонированного репозитория. Внутри `getting-started/app` вы найдете `package.json`, а также папки `src` и `spec`

<Image
  alt={`Bridge`}
  src={`/images/tr-docker-get-started/02-01.png`}
  width={650}
  height={311}
  priority
/>

## Создайте образ контейнера приложения
Для того, что бы создать [контейнер образа](https://docs.docker.com/get-started/overview/#docker-objects), вам необходимо исользовать `Dockerfile`. Dockerfile - это просто текстовый файл без расширения. Dockerfile содержит набор инструкций, который Docker использует для создания образа контейнера.
1. В папке `app`, в которой лежит файл `package.json`, создайте файл с названием `Dockerfile`. Вы можете использовать следующие команды исходя и вашей операционной системы:

* под `/path/to/app` подразумевается необходимый путь, что бы попасть в папку app приложения(прим. переводчика)
### Mac / Linux
```bash
$ cd /path/to/app
$ touch Dockerfile
```
### Windows
```bash
$ cd \path\to\app
$ type nul > Dockerfile
```

2. Используя текстовый редактор или редактор кода, добавьте в созданный файл следующие строки:
```Dockerfile
# syntax=docker/dockerfile:1
FROM node:18-alpine
WORKDIR /app
COPY . .
RUN yarn install --production
CMD ["node", "src/index.js"]
EXPOSE 3000
```
3. Создайте контейнер образа, используя следующие команды:
В терминале войдите в папку `getting-started/app`:
```bash
$ docker build -t getting-started .
```
Команда `docker build` использует Dockerfile для создания нового образа контейнера. Вы, должно быть, обратили винмание, что Docker скачивает много "слоёв". Это связано с тем, что вы указали сборщику, что хотите начать с образа `node:18-alpine`. Но, поскольку у вас нет этого образа на вашем компьютере, Docker необходимо было загрузить образ из хранилища.

После того как Docker загрузил образ, инструкции из файла Dockerfile скопированы в ваше приложение и использован yarn для установки зависимостей вашего приложения. Директива `CMD` определяет команду по-умолчанию, которая выполняется при запуске контейнера из этого образа.

Наконец, флаг `-t` создает имя вашему образу. Думайте об этом просто как об удобочитаемом названии конечного образа. Поскольку вы назвали образ getting-started, вы можете ссылаться на этот образ при запуске контейнера.

Точка `.` в конце команды `docker build` сообщает Docker, что он должен искать файл `Dockerfile` в текущей директории.

## Запускаем контейнер для приложения
Теперь, когда у вас есть образ, вы можете запустить приложление в [контейнере](https://docs.docker.com/get-started/overview/#docker-objects). Для этого используется команда `docker run`.
1. Выполните команду `docker run`, указав имя только что созданного образа:
```javascript
$ docker run -dp 3000:3000 getting-started
```
Флаг `-d` используется что бы запустить контейнер в "detached" моде, другими словами - в фоне, фоновым приложением. Также мы используем флаг `-p` для создания сопоставления между портом 3000 хоста и портом 3000 контейнера. Без этого мы не смогли бы получить доступ к приложению.
2. Откройте браузер и введите `http://localhost:3000/`. Вы должны увидеть работающее приложение.
<Image
  alt={`Bridge`}
  src={`/images/tr-docker-get-started/02-02.png`}
  width={1160}
  height={226}
  priority
/>

3. Добавьте один или два элемента и убедитесь, что они работают так, как вы ожидаете. Вы можете пометить элементы как завершенные и удалить элементы.

На этом этапе у вас должен быть запущенный менеджер списков задач с несколькими элементами, созданными вами.

Если вы быстро взглянете на панель управления Docker, вы должны увидеть по крайней мере один запущенный контейнер, который использует образ `getting-started` и работает на порту `3000`.
<Image
  alt={`Bridge`}
  src={`/images/tr-docker-get-started/02-03.png`}
  width={1200}
  height={694}
  priority
/>

## Следующие шаги
В этом коротком разделе вы узнали основы создания файла Dockerfile для создания образа контейнера. Как только вы создали образ, вы запустили контейнер и увидели запущенное приложение.

Далее вы внесете изменения в свое приложение и узнаете, как обновить запущенное приложение с новым образом. По пути вы узнаете несколько других полезных команд.

<Link href="/posts/tr-docker-get-started-03">
  <a className="text-gray-900 dark:text-white pr-6 py-4">Обновляем приложение</a>
</Link>
