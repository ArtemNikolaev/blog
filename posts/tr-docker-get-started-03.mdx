---
title: Docker - Обновляем приложение
description: Docker - Get Started 03 (перевод)
date: '2023-01-27'
---

## Содержание
<DockerGetStartedContentList />

В [части 2](/posts/tr-docker-get-started-02) вы контейнеризировали приложение `todo`. В этой части вы обновите образ приложения и контейнера. Вы также узнаете, как остановить и удалить контейнер.

## Обновляем исходный код
В приведенных ниже шагах вы измените "empty text" когда у вас нет элементов списка задач, на  “You have no todo items yet! Add one above!”
1. В файле `src/static/js/app.js` изменяем строку 56
```
...
-  <p className="text-center">No items yet! Add one above!</p>
+  <p className="text-center">You have no todo items yet! Add one above!</p>
...
```
2. Собираем обновленную версию образа, используя команду `docker build` из [части 2](/posts/tr-docker-get-started-02)
```
$ docker build -t getting-started .
```
3. Запускаем новый контейнер использую обновленный код
```
$ docker run -dp 3000:3000 getting0started
```

Вы, вероятно, видели подобную ошибку (ID будет другой):
```
docker: Error response from daemon: driver failed programming external connectivity on endpoint laughing_burnell
(bb242b2ca4d67eba76e79474fb36bb5125708ebdabd7f45c8eaf16caaabde9dd): Bind for 0.0.0.0:3000 failed: port is already allocated.
```
Ошибка произошла из-за того, что вы не можете запустить новый контейнер, пока ваш старый контейнер все еще запущен. Причина в том, что старый контейнер уже использует порт 3000 хоста, и только один процесс на компьютере (включая контейнеры) может прослушивать определенный порт. Чтобы исправить это, вам нужно удалить старый контейнер.

## Удаляем старый контейнер

Чтобы удалить контейнер, сначала нужно остановить его. Как только он остановится, мы сможем его удалить. Можно сделать это с помощью CLI или графического интерфейса Docker Desktop. Выберите тот вариант, который вам наиболее удобен.

### Удаление контейнера через CLI
1. Получаем идентификатор контейнера с помощью команды `docker ps`.
```
$ docker ps
```
2. Используем команду `docker stop`, чтобы остановить контейнер. Замените `<the-container-id>` ID из docker ps.
```
$ docker stop <the-container-id>
```
3. Как только контейнер остановится, мы можем удалить его с помощью команды `docker rm`.
```
$ socker rm <the-container-id>
```

> Note
Вы можете остановить и удалить контейнер с помощью одной команды, добавив флаг `force` в команду `docker rm`. Например: `docker rm -f <the-container-id>`

### Удаление контейнера через Docker Desktop
1. Открываем рабочий стол Docker **Containers**.
2. Выбераем значок корзины под столбцом **Actions** для старого контейнера, который хотим удалить.
3. В диалоговом окне подтверждения выбираем **Delete forever**.

## Следующий шаг

Хотя вам удалось обновить представление, вы могли заметить две вещи:

Все существующие элементы в списке дел исчезли! Это не очень хорошее приложение и мы скоро это исправим.
Для небольшого изменения потребовалось много шагов. В следующем разделе мы узнаем, как просматривать обновления кода без необходимости пересобирать и запускать новый контейнер каждый раз, когда код меняется.
Прежде чем говорить о постоянстве, вы увидите, как поделиться этими изображениями с другими.

<Link href="/posts/tr-docker-get-started-04">
  <a className="text-gray-900 dark:text-white pr-6 py-4">Делимся Приложением</a>
</Link>
